<template>
  <Layout>
    <!-- Learn how to use images here: https://gridsome.org/docs/images -->
    <g-image alt="Example image" src="~/favicon.png" width="135" />

    <h1>Hello, world!</h1>

    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur
      excepturi labore tempore expedita, et iste tenetur suscipit explicabo!
      Dolores, aperiam non officia eos quod asperiores
    </p>

    <p class="home-links">
      <a href="https://gridsome.org/docs/" target="_blank" rel="noopener"
        >Gridsome Docs</a
      >
      <a
        href="https://github.com/gridsome/gridsome"
        target="_blank"
        rel="noopener"
        >GitHub</a
      >
    </p>

    <section>
      <BlogPostPreview
        v-for="edge in $page.blogPosts.edges"
        :key="edge.node.id"
        :post="edge.node"
      ></BlogPostPreview>
    </section>
  </Layout>
</template>

<page-query>
query ($locale: String){
  blogPosts: allPost(filter: { lang: {eq:$locale} }) {
    totalCount
    edges {
      node {
        path
        title,
        id
        fileInfo {directory}
        tags {id path __typename}
      }
    }
  }
}

</page-query>

<script>
import BlogPostPreview from '../components/BlogPostPreview';
export default {
components:{BlogPostPreview},
  metaInfo: {
    title: "Hello, world!",
  },
};
</script>

<style>
.home-links a {
  margin-right: 1rem;
}
</style>
